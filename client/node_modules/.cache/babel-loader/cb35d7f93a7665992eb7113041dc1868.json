{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Viviana\\\\Desktop\\\\proiect tw2\\\\New folder (2)\\\\proiect\\\\client\\\\src\\\\components\\\\User.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { Alert, Button, Card, CardBody, CardHeader, CardSubtitle, CardTitle, Col, Container, Form, FormGroup, Input, Label, Modal, ModalBody, ModalFooter, ModalHeader, Row, Table } from 'reactstrap';\nimport ApiRequestHandler from '../entities/ApiRequestHelper';\nimport { useParams } from 'react-router-dom';\nimport './Card.css';\n\nconst renderTeams = (authHandler, user, setError, setSuccess, setConfirmation) => {\n  const requestHandler = new ApiRequestHandler();\n\n  const deleteFromTeam = async (teamId, user) => {\n    await requestHandler.delete(`/teams/${teamId}/members`, {\n      headers: authHandler.getAuthorizationHeader(),\n      body: [{\n        id: user.id,\n        username: user.username\n      }]\n    }, resp => {\n      resp.status !== 200 ? setError(resp.message) : setSuccess(resp.message);\n      setConfirmation({\n        require: false\n      });\n    });\n  };\n\n  const renderTeamsHeader = _ => {\n    return /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n        children: \"#\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n        children: \"Numele echipei\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n        children: \"Numele proiectului\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n        children: \"Nota\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 7\n      }, this), user.Teams && user.Teams.length > 0 && user.currentUser && user.currentUser.is_professor === 1 && /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 106\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this);\n  };\n\n  const renderTeamRow = (t, i) => {\n    const computeGrade = t => {\n      const grade = (t.Jury.grades.reduce((sum, g) => sum + g.value, 0) / t.Jury.grades.length).toFixed(2);\n      if (isNaN(grade)) return 'None';\n      return grade;\n    };\n\n    return /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n        scope: \"row\",\n        children: i + 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n        children: t.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n        children: t.project_name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n        children: computeGrade(t)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 7\n      }, this), user.currentUser && user.currentUser.is_professor === 1 && /*#__PURE__*/_jsxDEV(\"th\", {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          size: \"xs\",\n          color: \"danger\",\n          onClick: () => setConfirmation({\n            require: true,\n            message: `Esti sigur ca vrei sa stergi membrul: ${user.name} ${user.surname} din echipa'${t.name}'?`,\n            callback: async () => await deleteFromTeam(t.id, user)\n          }),\n          children: \"Sterge\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 7\n      }, this)]\n    }, t.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n      id: \"table-home\",\n      children: /*#__PURE__*/_jsxDEV(CardTitle, {\n        tag: \"h5\",\n        children: \"Echipe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        striped: true,\n        responsive: true,\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: renderTeamsHeader()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [user && user.Teams && user.Teams.length > 0 && user.Teams.map((t, i) => renderTeamRow(t, i)), !(user && user.Teams && user.Teams.length > 0) && /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"th\", {\n              colSpan: \"3\",\n              children: \"Nu e membru dintr-o echipa.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n\nconst renderJuries = (authHandler, user, setError, setSuccess, setConfirmation) => {\n  const requestHandler = new ApiRequestHandler();\n\n  const deleteFromTeam = async (teamId, user) => {\n    await requestHandler.delete(`/teams/${teamId}/juries`, {\n      headers: authHandler.getAuthorizationHeader(),\n      body: [{\n        id: user.id,\n        username: user.username\n      }]\n    }, resp => {\n      resp.status !== 200 ? setError(resp.message) : setSuccess(resp.message);\n      setConfirmation({\n        require: false\n      });\n    });\n  };\n\n  const renderJuriesHeader = _ => {\n    if (user.currentUser.username === user.username) {\n      return /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n          children: \"#\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          children: \"Numele echipei\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          children: \"Numele proiectului\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          children: \"Nota\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          children: \"Deadline\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this), user.Teams && user.Teams.length > 0 && user.currentUser && user.currentUser.is_professor === 1 && /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 110\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n        children: \"#\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n        children: \"Numele echipei\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n        children: \"Numele proiectului\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), user.Teams && user.Teams.length > 0 && user.currentUser && user.currentUser.is_professor === 1 && /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 108\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this);\n  };\n\n  const renderJuryRow = (j, i) => {\n    if (user.currentUser.username === user.username) {\n      return /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n          scope: \"row\",\n          children: i + 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          children: j.Team.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          children: j.Team.project_name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          children: j.UserJury.grade\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          children: j.UserJury.deadline && j.UserJury.deadline.replace('T', ' ').substr(0, j.UserJury.deadline.length - 5)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 9\n        }, this), user.currentUser && user.currentUser.is_professor === 1 && /*#__PURE__*/_jsxDEV(\"th\", {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            size: \"xs\",\n            color: \"danger\",\n            onClick: () => setConfirmation({\n              require: true,\n              message: `Esti sigur ca vrei sa stergi membrul:  ${user.name} ${user.surname} din echipa'${j.Team.name}'?`,\n              callback: async () => await deleteFromTeam(j.Team.id, user)\n            }),\n            children: \"Sterge\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 9\n        }, this)]\n      }, j.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 15\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n        scope: \"row\",\n        children: i + 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n        children: j.Team.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n        children: j.Team.project_name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 7\n      }, this), user.currentUser && user.currentUser.is_professor === 1 && /*#__PURE__*/_jsxDEV(\"th\", {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          size: \"xs\",\n          color: \"danger\",\n          onClick: () => setConfirmation({\n            require: true,\n            message: `Esti sigur ca vrei sa stergi membrul: ${user.name} ${user.surname} din echipa '${j.Team.name}'?`,\n            callback: async () => await deleteFromTeam(j.Team.id, user)\n          }),\n          children: \"Sterge\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 7\n      }, this)]\n    }, j.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n      id: \"table-home\",\n      children: /*#__PURE__*/_jsxDEV(CardTitle, {\n        tag: \"h5\",\n        children: \"Membrul in juriul:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        striped: true,\n        responsive: true,\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: renderJuriesHeader()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [user && user.Juries && user.Juries.length > 0 && user.Juries.map((j, i) => renderJuryRow(j, i)), !(user && user.Juries && user.Juries.length > 0) && /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"th\", {\n              colSpan: \"5\",\n              children: \"Nu face parte dintr-o echipa de jurati.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 157,\n    columnNumber: 5\n  }, this);\n};\n\nexport default function User({\n  useAuthHandler\n}) {\n  _s();\n\n  const authHandler = useAuthHandler();\n  const [user, setUser] = useState(null);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [confirmation, setConfirmation] = useState({\n    require: false\n  });\n  const [isEdittingUserData, editUserData] = useState(false);\n  const [userData, setUserData] = useState({});\n  const {\n    username\n  } = useParams();\n\n  const renderTeamsAndJuries = () => user && user.is_professor === 0 ? /*#__PURE__*/_jsxDEV(Row, {\n    xs: \"2\",\n    children: [/*#__PURE__*/_jsxDEV(Col, {\n      children: renderTeams(authHandler, user, setError, setSuccess, setConfirmation)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Col, {\n      children: renderJuries(authHandler, user, setError, setSuccess, setConfirmation)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 191,\n    columnNumber: 7\n  }, this) : null;\n\n  const getUserData = async requestHandler => {\n    let currentUser;\n    await requestHandler.get('/users', {\n      query: `?username=${authHandler.getUsername()}`,\n      headers: authHandler.getAuthorizationHeader()\n    }, resp => resp.message ? setError(resp.message) : currentUser = resp[0]);\n    await requestHandler.get('/users', {\n      query: `?username=${username}`,\n      headers: authHandler.getAuthorizationHeader()\n    }, async resp => {\n      if (resp && (resp.status !== 200 || resp.length < 1 || resp[0].name == null)) {\n        setError(resp.message || 'Nu s-a putut gasi user-ul');\n      } else if (resp && resp[0]) {\n        await requestHandler.get(`/users/${resp[0].id}`, {\n          headers: authHandler.getAuthorizationHeader()\n        }, async userResp => {\n          if (userResp && userResp.status !== 200) {\n            setError(userResp.message);\n          } else {\n            for (let i = 0; i < userResp.Teams.length; ++i) {\n              await requestHandler.get(`/teams/${userResp.Teams[i].id}`, {\n                headers: authHandler.getAuthorizationHeader()\n              }, teamResp => userResp.Teams[i].Jury = teamResp.Jury);\n            }\n\n            setUser({ ...userResp,\n              currentUser: currentUser\n            });\n            setUserData({ ...userResp\n            });\n          }\n        });\n      }\n    });\n  };\n\n  const handleChange = e => {\n    let currentData = { ...userData\n    };\n\n    if (e.target.type === 'checkbox') {\n      currentData[e.target.name] = e.target.checked;\n    } else {\n      currentData[e.target.name] = e.target.value;\n    }\n\n    setUserData(currentData);\n  };\n\n  const saveUserData = async () => {\n    const requestHandler = new ApiRequestHandler();\n    await requestHandler.put(`/users/${user.id}`, {\n      headers: authHandler.getAuthorizationHeader(),\n      body: { ...userData\n      }\n    }, resp => {\n      if (resp.status !== 200) {\n        //editUserData(false);\n        setError(resp.message);\n      } else {\n        setSuccess(resp.message);\n      }\n    });\n  };\n\n  useEffect(() => {\n    const requestHandler = new ApiRequestHandler();\n    getUserData(requestHandler);\n  }, [username]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    fluid: \"true\",\n    className: \"py-2 px-5\",\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: confirmation.require,\n      toggle: () => setConfirmation({\n        require: false\n      }),\n      children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n        children: \"Sters din echipa\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          color: \"danger\",\n          children: confirmation.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setConfirmation({\n            require: false\n          }),\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          color: \"danger\",\n          onClick: confirmation.callback,\n          children: \"Sterge\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: success.length > 0,\n      toggle: () => setSuccess(''),\n      children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n        children: \"Cont creeat.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          color: \"success\",\n          children: success\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          color: \"primary\",\n          onClick: () => {\n            if (userData.username !== username) {\n              localStorage.removeItem('user-state');\n            }\n\n            window.location.reload();\n            setSuccess('');\n          },\n          children: \"Ok\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: isEdittingUserData,\n      toggle: () => editUserData(false),\n      children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n        children: \"Editeaza date\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: e => e.preventDefault(),\n        method: \"POST\",\n        className: \"text-left\",\n        children: [/*#__PURE__*/_jsxDEV(ModalBody, {\n          children: [/*#__PURE__*/_jsxDEV(FormGroup, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              for: \"username\",\n              children: \"Username\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              id: \"username\",\n              name: \"username\",\n              type: \"text\",\n              placeholder: \"userName\",\n              value: userData.username,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              for: \"surname\",\n              children: \"Prenume\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              id: \"surname\",\n              name: \"surname\",\n              type: \"text\",\n              placeholder: \"Ion\",\n              value: userData.surname,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              for: \"name\",\n              children: \"Nume\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              id: \"name\",\n              name: \"name\",\n              type: \"text\",\n              placeholder: \"Vasile\",\n              value: userData.name,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              for: \"password\",\n              children: \"parola\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              id: \"password\",\n              name: \"password\",\n              type: \"password\",\n              placeholder: \"******\",\n              value: userData.password,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n            check: true,\n            children: /*#__PURE__*/_jsxDEV(Label, {\n              check: true,\n              children: [/*#__PURE__*/_jsxDEV(Input, {\n                id: \"is_professor\",\n                type: \"checkbox\",\n                name: \"is_professor\",\n                checked: userData.is_professor === 1,\n                onChange: handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 17\n              }, this), ' ', \"Const profesor\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => editUserData(false),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            color: \"danger\",\n            onClick: async () => {\n              await saveUserData();\n            },\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: error.length > 0,\n      toggle: () => setError(''),\n      children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n        children: \"Error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          color: \"danger\",\n          children: [\"Nu s-a putut gasi user-ul. \", error]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setError(''),\n          children: \"Ok\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"my-2 mb-3\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        md: \"4\",\n        className: \"mx-auto\",\n        children: user && error.length < 1 && /*#__PURE__*/_jsxDEV(Card, {\n          children: /*#__PURE__*/_jsxDEV(CardBody, {\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              tag: \"h4\",\n              children: `${user.surname}, ${user.name}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(CardSubtitle, {\n              tag: \"h6\",\n              className: \"mb-2 text-muted\",\n              children: user ? user.is_professor === 1 ? 'Professor' : 'Student' : null\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 17\n            }, this), user.currentUser && user.currentUser.is_professor === 1 && /*#__PURE__*/_jsxDEV(Button, {\n              size: \"sm\",\n              color: \"primary\",\n              onClick: () => editUserData(true),\n              children: \"Modifica\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 77\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 7\n    }, this), renderTeamsAndJuries()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 271,\n    columnNumber: 5\n  }, this);\n}\n\n_s(User, \"Xj45KxpObADXISKd0df0YjAXDbQ=\", true, function () {\n  return [useParams];\n});\n\n_c = User;\n\nvar _c;\n\n$RefreshReg$(_c, \"User\");","map":{"version":3,"sources":["C:/Users/Viviana/Desktop/proiect tw2/New folder (2)/proiect/client/src/components/User.js"],"names":["useState","useEffect","Alert","Button","Card","CardBody","CardHeader","CardSubtitle","CardTitle","Col","Container","Form","FormGroup","Input","Label","Modal","ModalBody","ModalFooter","ModalHeader","Row","Table","ApiRequestHandler","useParams","renderTeams","authHandler","user","setError","setSuccess","setConfirmation","requestHandler","deleteFromTeam","teamId","delete","headers","getAuthorizationHeader","body","id","username","resp","status","message","require","renderTeamsHeader","_","Teams","length","currentUser","is_professor","renderTeamRow","t","i","computeGrade","grade","Jury","grades","reduce","sum","g","value","toFixed","isNaN","name","project_name","surname","callback","map","renderJuries","renderJuriesHeader","renderJuryRow","j","Team","UserJury","deadline","replace","substr","Juries","User","useAuthHandler","setUser","error","success","confirmation","isEdittingUserData","editUserData","userData","setUserData","renderTeamsAndJuries","getUserData","get","query","getUsername","userResp","teamResp","handleChange","e","currentData","target","type","checked","saveUserData","put","localStorage","removeItem","window","location","reload","preventDefault","password"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\nimport {\n  Alert,\n  Button,\n  Card,\n  CardBody,\n  CardHeader,\n  CardSubtitle,\n  CardTitle,\n  Col,\n  Container,\n  Form,\n  FormGroup,\n  Input,\n  Label,\n  Modal,\n  ModalBody,\n  ModalFooter,\n  ModalHeader,\n  Row,\n  Table\n} from 'reactstrap';\nimport ApiRequestHandler from '../entities/ApiRequestHelper';\nimport { useParams } from 'react-router-dom';\nimport './Card.css';\n\nconst renderTeams = (authHandler, user, setError, setSuccess, setConfirmation) => {\n  const requestHandler = new ApiRequestHandler();\n  const deleteFromTeam = async (teamId, user) => {\n    await requestHandler.delete(`/teams/${teamId}/members`, {\n      headers: authHandler.getAuthorizationHeader(),\n      body: [{ id: user.id, username: user.username }]\n    }, resp => {\n      resp.status !== 200 ? setError(resp.message) : setSuccess(resp.message);\n      setConfirmation({require: false});\n    });\n  };\n\n  const renderTeamsHeader = _ =>\n  {\n    return (<tr>\n      <th>#</th>\n      <th>Numele echipei</th>\n      <th>Numele proiectului</th>\n      <th>Nota</th>\n      {user.Teams && user.Teams.length > 0 && user.currentUser && user.currentUser.is_professor === 1 && <th></th>}\n    </tr>);\n  };\n  const renderTeamRow = (t, i) =>\n  {\n    const computeGrade = t => {\n      const grade = (t.Jury.grades.reduce((sum, g) => sum + g.value, 0) / t.Jury.grades.length).toFixed(2);\n\n      if(isNaN(grade))\n        return 'None';\n      return grade;\n    }\n\n    return (<tr key={t.id}>\n      <th scope=\"row\">{i + 1}</th>\n      <th>{t.name}</th>\n      <th>{t.project_name}</th>\n      <th>{computeGrade(t)}</th>\n      { user.currentUser && user.currentUser.is_professor === 1 &&\n      <th><Button size=\"xs\" color=\"danger\" onClick={() => setConfirmation({ require: true, message: `Esti sigur ca vrei sa stergi membrul: ${user.name} ${user.surname} din echipa'${t.name}'?`, callback: async () => await deleteFromTeam(t.id, user) })}>Sterge</Button></th>\n      }\n    </tr>);\n  };\n\n  return (\n    <Card >\n      <CardHeader id=\"table-home\">\n        <CardTitle tag=\"h5\">Echipe</CardTitle>\n      </CardHeader>\n      <CardBody>\n        <Table striped responsive>\n          <thead>\n            { renderTeamsHeader() }\n          </thead>\n          <tbody>\n            { user && user.Teams && user.Teams.length > 0 && user.Teams.map((t, i) => renderTeamRow(t, i)) }\n            { !(user && user.Teams && user.Teams.length > 0) &&\n              <tr>\n                <th colSpan=\"3\">Nu e membru dintr-o echipa.</th>\n              </tr>\n            }\n          </tbody>\n        </Table>\n      </CardBody>\n    </Card>\n  );\n}\n\nconst renderJuries = (authHandler, user, setError, setSuccess, setConfirmation) => {\n  const requestHandler = new ApiRequestHandler();\n  const deleteFromTeam = async (teamId, user) => {\n    await requestHandler.delete(`/teams/${teamId}/juries`, {\n      headers: authHandler.getAuthorizationHeader(),\n      body: [{ id: user.id, username: user.username }]\n    }, resp => {\n      resp.status !== 200 ? setError(resp.message) : setSuccess(resp.message);\n      setConfirmation({require: false});\n    });\n  };\n\n  const renderJuriesHeader = _ =>\n  {\n    if(user.currentUser.username === user.username)\n    {\n      return (\n        <tr>\n          <th>#</th>\n          <th>Numele echipei</th>\n          <th>Numele proiectului</th>\n          <th>Nota</th>\n          <th>Deadline</th>\n          {user.Teams && user.Teams.length > 0 && user.currentUser && user.currentUser.is_professor === 1 && <th></th>}\n        </tr>);\n    }\n\n    return (\n      <tr>\n        <th>#</th>\n        <th>Numele echipei</th>\n        <th>Numele proiectului</th>\n        {user.Teams && user.Teams.length > 0 && user.currentUser && user.currentUser.is_professor === 1 && <th></th>}\n      </tr>);\n  };\n\n  const renderJuryRow = (j, i) =>\n  {\n    if(user.currentUser.username === user.username)\n    {\n      return (<tr key={j.id}>\n        <th scope=\"row\">{i + 1}</th>\n        <th>{j.Team.name}</th>\n        <th>{j.Team.project_name}</th>\n        <th>{j.UserJury.grade}</th>\n        <th>{j.UserJury.deadline && j.UserJury.deadline.replace('T', ' ').substr(0, j.UserJury.deadline.length - 5)}</th>\n        { user.currentUser && user.currentUser.is_professor === 1 &&\n        <th><Button size=\"xs\" color=\"danger\" onClick={() => setConfirmation({ require: true, message: `Esti sigur ca vrei sa stergi membrul:  ${user.name} ${user.surname} din echipa'${j.Team.name}'?`, callback: async () => await deleteFromTeam(j.Team.id, user) })}>Sterge</Button></th>\n        }\n      </tr>);\n    }\n\n    return (<tr key={j.id}>\n      <th scope=\"row\">{i + 1}</th>\n      <th>{j.Team.name}</th>\n      <th>{j.Team.project_name}</th>  \n      { user.currentUser && user.currentUser.is_professor === 1 &&\n      <th><Button size=\"xs\" color=\"danger\" onClick={() => setConfirmation({ require: true, message: `Esti sigur ca vrei sa stergi membrul: ${user.name} ${user.surname} din echipa '${j.Team.name}'?`, callback: async () => await deleteFromTeam(j.Team.id, user) })}>Sterge</Button></th>\n      }\n    </tr>);\n  }\n\n  return (\n    <Card>\n      <CardHeader id=\"table-home\">\n        <CardTitle tag=\"h5\">Membrul in juriul:</CardTitle>\n      </CardHeader>\n      <CardBody>\n        <Table striped responsive>\n          <thead>\n              { renderJuriesHeader() }\n          </thead>\n          <tbody>\n            { user && user.Juries && user.Juries.length > 0 && user.Juries.map((j, i) => renderJuryRow(j, i)) }\n            { !(user && user.Juries && user.Juries.length > 0) &&\n              <tr>\n                <th colSpan=\"5\">Nu face parte dintr-o echipa de jurati.</th>\n              </tr>\n            }\n          </tbody>\n        </Table>\n      </CardBody>\n    </Card>\n  );\n}\n\nexport default function User({ useAuthHandler })\n{\n  const authHandler = useAuthHandler();\n  const [user, setUser] = useState(null);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [confirmation, setConfirmation] = useState({ require: false });\n  const [isEdittingUserData, editUserData] = useState(false);\n  const [userData, setUserData] = useState({});\n  const { username } = useParams();\n  const renderTeamsAndJuries = () => user && user.is_professor === 0 ? (\n      <Row xs=\"2\">\n        <Col>{renderTeams(authHandler, user, setError, setSuccess, setConfirmation)}</Col>\n        <Col>{renderJuries(authHandler, user, setError, setSuccess, setConfirmation)}</Col>\n      </Row>\n  ) : null;\n  const getUserData = async (requestHandler) => {\n    let currentUser;\n    await requestHandler.get('/users', {\n      query: `?username=${authHandler.getUsername()}`,\n      headers: authHandler.getAuthorizationHeader()\n    }, resp => resp.message ? setError(resp.message) : currentUser = resp[0]);\n\n    await requestHandler.get('/users', {\n      query: `?username=${username}`,\n      headers: authHandler.getAuthorizationHeader()\n    }, async resp => {\n      if (resp && (resp.status !== 200 || resp.length < 1 || resp[0].name == null))\n      {\n        setError(resp.message || 'Nu s-a putut gasi user-ul');\n      }\n      else if(resp && resp[0])\n      {\n        await requestHandler.get(`/users/${resp[0].id}`, {\n          headers: authHandler.getAuthorizationHeader()\n        }, async userResp => {\n          if(userResp && userResp.status !== 200)\n          {\n            setError(userResp.message);\n          }\n          else\n          {\n            for(let i = 0; i < userResp.Teams.length; ++i)\n            {\n              await requestHandler.get(`/teams/${userResp.Teams[i].id}`, {\n                headers: authHandler.getAuthorizationHeader() \n              }, teamResp => userResp.Teams[i].Jury = teamResp.Jury);\n            }\n            setUser({ ...userResp, currentUser: currentUser });\n            setUserData({ ...userResp });\n          }\n        });\n      }\n    });\n  };\n  const handleChange = e => {\n    let currentData = { ...userData };\n    if(e.target.type === 'checkbox')\n    {\n      currentData[e.target.name] = e.target.checked;\n    }\n    else\n    {\n      currentData[e.target.name] = e.target.value;\n    }\n    setUserData(currentData);\n  };\n  const saveUserData = async () => {\n    const requestHandler = new ApiRequestHandler();\n    await requestHandler.put(`/users/${user.id}`, {\n      headers: authHandler.getAuthorizationHeader(),\n      body: { ...userData }\n    }, resp => {\n      if(resp.status !== 200)\n      {\n        //editUserData(false);\n        setError(resp.message);\n      }\n      else\n      {\n        setSuccess(resp.message);\n      }\n    });\n  };\n\n  useEffect(() => {\n    const requestHandler = new ApiRequestHandler();\n    getUserData(requestHandler);\n  }, [username]);\n\n  return (\n    <Container fluid='true' className=\"py-2 px-5\">\n      <Modal isOpen={confirmation.require} toggle={() => setConfirmation({require: false})}>\n        <ModalHeader>Sters din echipa</ModalHeader>\n        <ModalBody>\n          <Alert color=\"danger\">{confirmation.message}</Alert>\n        </ModalBody>\n        <ModalFooter>\n          <Button onClick={() => setConfirmation({ require: false })}>Cancel</Button>\n          <Button color=\"danger\" onClick={confirmation.callback}>Sterge</Button>\n        </ModalFooter>\n      </Modal>\n      <Modal isOpen={success.length > 0} toggle={() => setSuccess('')}>\n        <ModalHeader>Cont creeat.</ModalHeader>\n        \n        <ModalBody>\n          <Alert color=\"success\">{success}</Alert>\n        </ModalBody>\n\n        <ModalFooter>\n          <Button color=\"primary\" onClick={() => {\n            if(userData.username !== username)\n            {\n              localStorage.removeItem('user-state');\n            }\n            window.location.reload();\n            setSuccess('');\n            }}>\n            Ok\n          </Button>\n        </ModalFooter>\n      </Modal>\n      <Modal isOpen={isEdittingUserData} toggle={() => editUserData(false)}>\n        <ModalHeader>Editeaza date</ModalHeader>\n        <Form onSubmit={e => e.preventDefault()} method=\"POST\" className=\"text-left\">\n          <ModalBody>\n            <FormGroup>\n              <Label for=\"username\">Username</Label>\n              <Input id=\"username\" name=\"username\" type=\"text\" placeholder=\"userName\" value={userData.username} onChange={handleChange} />\n            </FormGroup>\n            <FormGroup>\n              <Label for=\"surname\">Prenume</Label>\n              <Input id=\"surname\" name=\"surname\" type=\"text\" placeholder=\"Ion\" value={userData.surname} onChange={handleChange} />\n            </FormGroup>\n            <FormGroup>\n              <Label for=\"name\">Nume</Label>\n              <Input id=\"name\" name=\"name\" type=\"text\" placeholder=\"Vasile\" value={userData.name} onChange={handleChange} />\n            </FormGroup>\n            <FormGroup>\n              <Label for=\"password\">parola</Label>\n              <Input id=\"password\" name=\"password\" type=\"password\" placeholder=\"******\" value={userData.password} onChange={handleChange} />\n            </FormGroup>\n            <FormGroup check>\n              <Label check>\n                <Input id=\"is_professor\" type=\"checkbox\" name=\"is_professor\" checked={userData.is_professor === 1} onChange={handleChange} />{' '}\n               Const profesor\n              </Label>\n            </FormGroup>\n          </ModalBody>\n          <ModalFooter>\n            <Button onClick={() => editUserData(false)}>Cancel</Button>\n            <Button color=\"danger\" onClick={async () => { await saveUserData(); }}>Save</Button>\n          </ModalFooter>\n        </Form>\n      </Modal>\n      <Modal isOpen={error.length > 0} toggle={() => setError('')}>\n        <ModalHeader>Error</ModalHeader>\n        <ModalBody>\n          <Alert color=\"danger\">Nu s-a putut gasi user-ul. {error}</Alert>\n        </ModalBody>\n        <ModalFooter>\n          <Button onClick={() => setError('')}>Ok</Button>\n        </ModalFooter>\n      </Modal>\n      <Row className=\"my-2 mb-3\">\n        <Col md=\"4\" className=\"mx-auto\">\n          { user && error.length < 1 &&\n          <Card>\n              <CardBody>\n                <CardTitle tag=\"h4\">{ `${user.surname}, ${user.name}` }</CardTitle>\n                <CardSubtitle tag=\"h6\" className=\"mb-2 text-muted\">{ user ? (user.is_professor === 1 ? 'Professor' : 'Student') : null }</CardSubtitle>\n                {user.currentUser && user.currentUser.is_professor === 1 && <Button size=\"sm\" color=\"primary\" onClick={() => editUserData(true)}>Modifica</Button>}\n              </CardBody>\n          </Card> \n          }\n        </Col>\n      </Row>\n      {renderTeamsAndJuries()}\n    </Container>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}